<main>
  <div class="cards flex gap-4 flex-wrap w-full ">
    <% @guidelines.each do |guide| %>
      <div class="max-w-sm p-6 bg-white border border-gray-200 rounded-lg shadow dark:bg-gray-800 dark:border-gray-700">
        <a href="<%= guide[:link] %>">
          <h5 class="mb-2 text-2xl font-semibold tracking-tight text-gray-900 dark:text-white"><%= guide[:title] %></h5>
        </a>
        <p class="mb-3 font-normal text-gray-500 dark:text-gray-400"><%= guide[:count] %></p>
        <a href="<%= guide[:link] %>" class="inline-flex font-medium items-center text-blue-600 hover:underline">
          See our guideline
          <svg class="w-3 h-3 ms-2.5 rtl:rotate-[270deg]" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 18 18">
            <path stroke="currentColor" stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 11v4.833A1.166 1.166 0 0 1 13.833 17H2.167A1.167 1.167 0 0 1 1 15.833V4.167A1.166 1.166 0 0 1 2.167 3h4.618m4.447-2H17v5.768M9.111 8.889l7.778-7.778"/>
          </svg>
        </a>
      </div>
    <% end %>
  </div>
  <section class="bottom section">
    <div class="sectional-data">
      <div class="mb-4 border-b border-gray-200 dark:border-gray-700">
        <!-- Dropdown for Tabs -->
        <div class="relative inline-block">
          <button class="inline-flex justify-center w-full px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg shadow-sm hover:bg-gray-50 dark:bg-gray-800 dark:text-gray-300 dark:border-gray-600 dark:hover:bg-gray-700" type="button" id="tabsDropdownButton" data-dropdown-toggle="tabsDropdown">
            Select Tab
            <svg class="w-5 h-5 ml-2 -mr-1" aria-hidden="true" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" />
            </svg>
          </button>
          <!-- Dropdown Menu -->
          <div id="tabsDropdown" class="hidden z-10 w-44 bg-white divide-y divide-gray-100 rounded-lg shadow dark:bg-gray-800">
            <ul class="py-2 text-sm text-gray-700 dark:text-gray-200">
              <li>
                <button class="w-full px-4 py-2 text-left" data-tabs-target="#profile" type="button" role="tab" aria-controls="profile" aria-selected="false">Profile</button>
              </li>
              <li>
                <button class="w-full px-4 py-2 text-left" data-tabs-target="#dashboard" type="button" role="tab" aria-controls="dashboard" aria-selected="false">Dashboard</button>
              </li>
              <li>
                <button class="w-full px-4 py-2 text-left" data-tabs-target="#settings" type="button" role="tab" aria-controls="settings" aria-selected="false">Settings</button>
              </li>
              <li>
                <button class="w-full px-4 py-2 text-left" data-tabs-target="#contacts" type="button" role="tab" aria-controls="contacts" aria-selected="false">Contacts</button>
              </li>
            </ul>
          </div>
        </div>
      </div>
      <!-- Tab Content -->
      <div id="default-tab-content">
        <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="profile" role="tabpanel" aria-labelledby="profile-tab">
          <p class="text-sm text-gray-500 dark:text-gray-400">
            <%= pie_chart User.group(:first_name).count %>
          </p>
        </div>
        <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="dashboard" role="tabpanel" aria-labelledby="dashboard-tab">
          <p class="text-sm text-gray-500 dark:text-gray-400">
            This is some placeholder content the <strong class="font-medium text-gray-800 dark:text-white">Dashboard tab's associated content</strong>. Clicking another tab will toggle the visibility of this one for the next.
          </p>
        </div>
        <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="settings" role="tabpanel" aria-labelledby="settings-tab">
          <p class="text-sm text-gray-500 dark:text-gray-400">
            This is some placeholder content the <strong class="font-medium text-gray-800 dark:text-white">Settings tab's associated content</strong>. Clicking another tab will toggle the visibility of this one for the next.
          </p>
        </div>
        <div class="hidden p-4 rounded-lg bg-gray-50 dark:bg-gray-800" id="contacts" role="tabpanel" aria-labelledby="contacts-tab">
          <p class="text-sm text-gray-500 dark:text-gray-400">
            This is some placeholder content the <strong class="font-medium text-gray-800 dark:text-white">Contacts tab's associated content</strong>. Clicking another tab will toggle the visibility of this one for the next.
          </p>
        </div>
      </div>
    </div>
    <div id="sectional-data2">
      <div id=pill-cards-section">
        <a href="#" class="block max-w-fit  bg-blue-950 border p-4 border-gray-200 rounded-xl shadow  text-white">
          <h2>Total Staffs</h2>
          <p>20000</p>
        </a>
        <a href="#" class="block max-w-fit  bg-blue-950 border p-4 border-gray-200 rounded-xl shadow  text-white">
          <h2>Total Volunteer</h2>
          <p>20000</p>
        </a>
        <a href="#" class="block max-w-fit  bg-blue-950 border p-4 border-gray-200 rounded-xl shadow  text-white">
          <h2>Donor Success rate</h2>
          <p>20000</p>
        </a>
      </div>
      <div id="beneficiary-ratio">
        <div class="flex flex-col justify-center">
          <h3>Beneficiary Tpye ratio</h3>
          ...
          <div>
            <%= pie_chart @beneficiary_data, title: "Beneficiary Type Ratio", colors: ["#FF5733", "#33FF57", "#3357FF"] %>
          </div>
        </div>
      </div>
    </section>
  </main>
  <script>
    document.addEventListener("DOMContentLoaded", () => {
    // Dropdown toggle
    const dropdownButton = document.getElementById("tabsDropdownButton");
    const dropdownMenu = document.getElementById("tabsDropdown");
    dropdownButton.addEventListener("click", () => {
      dropdownMenu.classList.toggle("hidden");
    });

    // Tab switching
    const tabButtons = document.querySelectorAll("[data-tabs-target]");
    tabButtons.forEach((button) => {
      button.addEventListener("click", (event) => {
        // Hide all tab contents
        document.querySelectorAll("[role='tabpanel']").forEach((tab) => {
          tab.classList.add("hidden");
        });

        // Remove active state from all buttons
        tabButtons.forEach((btn) => {
          btn.setAttribute("aria-selected", "false");
        });

        // Show the targeted tab and set active state
        const target = document.querySelector(button.getAttribute("data-tabs-target"));
        target.classList.remove("hidden");
        button.setAttribute("aria-selected", "true");

        // Hide the dropdown
        dropdownMenu.classList.add("hidden");
      });
    });
    });
  </script>
