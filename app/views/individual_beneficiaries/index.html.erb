<div class="flex justify-between items-center">
  <h2 class="text-2xl font-bold">Individual Beneficiaries</h2>
  <div>
    <button class="toggle-button bg-lightGreen text-white py-2 px-4 rounded hover:bg-lime-600" onclick="toggleFilter()">
      Filter
    </button>
    <%= link_to "Clear Filters", individual_beneficiaries_path, class: "clear-filter ml-4 text-gray-500 py-2 px-4 bg-gray-100 rounded hover:underline hover:bg-gray-200" %>
  </div>
</div>
<div class="mb-6 font-Outfit text-[#5a607a]">
  <div class="filter-form space-y-4 mt-4 hidden">
    <%= form_with url: individual_beneficiaries_path, method: :get, local: true, class: "space-y-4", data: { controller: "filter", action: "submit->filter#handleFilterSubmit" } do |form| %>
      <div class="flex flex-wrap gap-4">
        <div class="w-full">
          <%= form.label :name, "Name", class: "block text-gray-700" %>
          <%= form.text_field :name, value: params[:name], class: "mt-1 block w-full border border-gray-300 rounded focus:ring-1 focus:ring-lightGreen focus:border-lightGreen" %>
        </div>
        <div class="w-1/3 md:w-1/4 lg:w-1/6 flex-grow">
          <%= form.label :case_name, "Case Name", class: "block text-gray-700" %>
          <%= form.text_field :case_name, value: params[:case_name], class: "mt-1 block w-full border border-gray-300 rounded focus:ring-1 focus:ring-lightGreen focus:border-lightGreen" %>
        </div>
        <div class="w-1/3 md:w-1/4 lg:w-1/6 flex-grow">
          <%= form.label :gender, "Gender", class: "block text-gray-700" %>
          <%= form.select :gender, options_for_select([["Male", "male"], ["Female", "female"]], selected: params[:gender]), { prompt: "Select Gender" }, class: "mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:ring-1 focus:ring-lightGreen focus:border-lightGreen" %>
        </div>
        <div class="w-1/3 md:w-1/4 lg:w-1/6 flex-grow">
          <%= form.label :phone_number, "Phone Number", class: "block text-gray-700" %>
          <%= form.text_field :phone_number, value: params[:phone_number], class: "mt-1 block w-full border border-gray-300 rounded focus:ring-1 focus:ring-lightGreen focus:border-lightGreen" %>
        </div>
        <div class="w-1/3 md:w-1/4 lg:w-1/6 flex-grow">
          <%= form.label :min_age, "Minimum Age", class: "block text-gray-700" %>
          <%= form.number_field :min_age, value: params[:min_age], class: "mt-1 block w-full border border-gray-300 rounded focus:ring-1 focus:ring-lightGreen focus:border-lightGreen" %>
        </div>
        <div class="w-1/3 md:w-1/4 lg:w-1/6 flex-grow">
          <%= form.label :max_age, "Maximum Age", class: "block text-gray-700" %>
          <%= form.number_field :max_age, value: params[:max_age], class: "mt-1 block w-full border border-gray-300 rounded focus:ring-1 focus:ring-lightGreen focus:border-lightGreen" %>
        </div>
        <div class="w-1/3 md:w-1/4 lg:w-1/6 flex-grow">
          <%= form.label :district_id, "District", class: "block text-gray-700" %>
          <%= form.collection_select :district_id, @districts, :id, :name, { prompt: "Select District" }, { id: 'district-select', class: 'form-select mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-1 focus:ring-lightGreen focus:border-lightGreen', 'data-context-path': "individual_beneficiaries" } %>
        </div>
        <div class="w-1/3 md:w-1/4 lg:w-1/6 flex-grow">
          <%= form.label :county_id, "County", class: "block text-gray-700" %>
          <%= form.collection_select :county_id, @counties, :id, :name, { prompt: "Select County" }, { id: 'county-select', class: 'form-select mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-1 focus:ring-lightGreen focus:border-lightGreen', 'data-context-path': "individual_beneficiaries" } %>
        </div>
        <div class="w-1/3 md:w-1/4 lg:w-1/6 flex-grow">
          <%= form.label :sub_county_id, "Sub-County", class: "block text-gray-700" %>
          <%= form.collection_select :sub_county_id, @sub_counties, :id, :name, { prompt: "Select Sub-County" }, { id: 'sub-county-select', class: 'form-select mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:ring-1 focus:ring-lightGreen focus:border-lightGreen' } %>
        </div>
        <div class="w-1/3 md:w-1/4 lg:w-1/6 flex-grow">
          <%= form.label :start_date, "Start Date", class: "block text-gray-700" %>
          <%= form.date_field :start_date, value: params[:start_date], class: "mt-1 block w-full border border-gray-300 rounded focus:ring-1 focus:ring-lightGreen focus:border-lightGreen" %>
        </div>
        <div class="w-1/3 md:w-1/4 lg:w-1/6 flex-grow">
          <%= form.label :end_date, "End Date", class: "block text-gray-700" %>
          <%= form.date_field :end_date, value: params[:end_date], class: "mt-1 block w-full border border-gray-300 rounded focus:ring-1 focus:ring-lightGreen focus:border-lightGreen" %>
        </div>
      </div>
      <div class="mt-4">
        <%= form.submit "Filter", class: "inline-block bg-lightGreen text-white py-2 px-4 rounded hover:bg-lime-600" %>
      </div>
    <% end %>
  </div>
</div>
<div class="overflow-x-auto">
  <table class="min-w-full max-h-fit bg-white shadow-md rounded-lg border-x border-gray-100 data-table">
    <thead>
      <tr class="text-darkBlue bg-sky-50">
        <th class="px-6 py-3 text-left font-Outfit text-base font-bold tracking-wider w-1/3">Name</th>
        <th class="px-6 py-3 text-left font-Outfit text-base font-bold tracking-wider w-1/12">Age</th>
        <th class="px-6 py-3 text-left font-Outfit text-base font-bold tracking-wider w-1/12">Gender</th>
        <th class="px-6 py-3 text-left font-Outfit text-base font-bold tracking-wider w-1/6">Case</th>
        <th class="px-6 py-3 text-left font-Outfit text-base font-bold tracking-wider w-1/6">Phone</th>
        <th class="px-6 py-3 text-center font-Outfit text-base font-bold tracking-wider w-1/6">Actions</th>
      </tr>
    </thead>
    <tbody>
      <% @individual_beneficiaries.each do |beneficiary| %>
        <tr class="hover:bg-gray-100 border-b border-b-gray-100">
          <td class="px-6 py-4 text-sm font-semibold font-Outfit text-[#5a607a] w-1/3"><%= beneficiary.name %></td>
          <td class="px-6 py-4 text-sm font-semibold font-Outfit text-[#5a607a] w-1/12"><%= beneficiary.age %></td>
          <td class="px-6 py-4 text-sm font-semibold font-Outfit text-[#5a607a] w-1/12"><%= beneficiary.gender %></td>
          <td class="px-6 py-4 text-sm font-semibold font-Outfit text-[#5a607a] w-1/6"><%= beneficiary.case_name %></td>
          <td class="px-6 py-4 text-sm font-semibold font-Outfit text-[#5a607a] w-1/6"><%= beneficiary.phone_number %></td>
          <td class="px-6 py-4 text-sm font-semibold font-Outfit text-[#5a607a] w-1/6 text-center">
            <div class="relative inline-block text-left" data-dropdown-container>
              <!-- Actions button -->
              <button class="actions-button inline-flex justify-center w-full rounded-md border border-gray-300 bg-white px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50 focus:outline-none" data-dropdown-button>
                Actions
                <svg class="-mr-1 ml-2 h-5 w-5" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 20 20" stroke="currentColor" aria-hidden="true">
                  <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 7l7 7 7-7"></path>
                </svg>
              </button>
              <!-- Dropdown menu -->
              <div class="dropdown-menu absolute right-0 z-10 mt-2 w-48 origin-top-right bg-white rounded-md shadow-lg hidden" data-dropdown-menu>
                <div class="py-1">
                  <%= link_to 'Show', individual_beneficiary_path(beneficiary), class: 'block px-4 py-2 text-sm text-indigo-600 hover:bg-indigo-100' %>
                  <%= link_to 'Edit', edit_request_individual_beneficiary_path(beneficiary.request, beneficiary), class: 'block px-4 py-2 text-sm text-blue-600 hover:bg-blue-100' %>
                  <%= button_to 'Destroy', individual_beneficiary_path(beneficiary), method: :delete, data: { confirm: 'Are you sure?' }, class: 'block px-4 py-2 text-sm text-red-600 hover:bg-red-100' %>
                </div>
              </div>
            </div>
          </td>
        </tr>
      <% end %>
    </tbody>
  </table>
</div>
